# tmux.conf                                                               ><>Â°
#
# -----------------------------------------------------------------------
# Table of Contents
# -----------------------------------------------------------------------
# 1. Sensible defaults
# 2. Look & feel
# 3. Keybindings
# 4. Plugins
# -----------------------------------------------------------------------


# (1) Sensible defaults ------------------------------------------------- {{{1

# Enable focus events for terminals that support them
set -g focus-events on

# Eliminates the delay when switching vim modes (default: 500)
set -s escape-time 0

# Increase scrollback buffer size (default: 2000)
set -g history-limit 10000

# By default windows are limited to the size of the smallest client
set -g aggressive-resize on

# Start counting from 1
set -g base-index 1
setw -g pane-base-index 1

# Update window index and avoid gaps
set -g renumber-windows on

# Upgrade $TERM and enable support for colors
set -g default-terminal "screen-256color"

# Set default command used for new windows. Fixes the clipboard on macOS.
if 'type reattach-to-user-namespace >/dev/null 2>&1' \
  'set -g default-command "reattach-to-user-namespace -l ${SHELL}"' \
  'set -g default-command ${SHELL}'


# (2) Look & feel ------------------------------------------------------- {{{1


# (3) Keybindings ------------------------------------------------------- {{{1

# Enable the mouse. Shame on me...
set -g mouse on

# Change tmux prefix to Ctrl+Space
set -g prefix C-space

# Use keybindings familiar from vim in copy mode
set -g status-keys emacs
setw -g mode-keys vi

# Pressing `prefix + prefix` sends <prefix> to the shell
bind C-Space send-prefix

# Switch to copy-mode (Custom key binding for the german keyboard)
bind Enter copy-mode -e

# Improve the new window binding
bind c new-window -c "#{pane_current_path}"

# Switch easily between windows
bind Space last-window
bind C-p previous-window
bind C-n next-window

# Synchronize panes
bind = setw -g synchronize-panes \; display "Toggled Pane-Synchronization"

# Reload configuration
bind r source-file "${XDG_CONFIG_HOME}/tmux/tmux.conf" \; display "Sourced tmux configuration file"

# Bring back clear-screen/kill-line under tmux prefix
bind C-l send "C-l"
bind C-k send "C-k"


# (4) Plugins ----------------------------------------------------------- {{{1

# Change the installation directory for tmux plugins
set-environment -g TMUX_PLUGIN_MANAGER_PATH "${XDG_DATA_HOME}/tmux/plugins"

# Provide a list of tmux plugins to use (@see <https://git.io/vFX1U>)
set -g @tpm_plugins '\
  tmux-plugins/tpm \
  tmux-plugins/tmux-copycat \
  tmux-plugins/tmux-open \
  tmux-plugins/tmux-pain-control \
  tmux-plugins/tmux-prefix-highlight \
  tmux-plugins/tmux-yank \
  tmux-plugins/vim-tmux-focus-events \
'

# Install the Tmux Plugin Manager and listed plugins
if "[[ ! -d ${XDG_DATA_HOME}/tmux/plugins/tpm ]]" \
  'run "git clone https://github.com/tmux-plugins/tpm ${XDG_DATA_HOME}/tmux/plugins/tpm && ${XDG_DATA_HOME}/tmux/plugins/tpm/bin/install_plugins"'

# Run Tmux Plugin Manager and initialize all plugins
run '${XDG_DATA_HOME}/tmux/plugins/tpm/tpm'

# vim:foldmethod=marker:foldlevel=1
