#!/usr/bin/env zsh

# Base folder containing all dotfiles
export DOTFILES_PATH=~/.dotfiles
export ZSH_PLUGIN_PATH=$DOTFILES_PATH/config/zsh/plugins

# Customize zshâ€™s fpath
fpath=( ~/.zfunctions $DOTFILES_PATH/functions $fpath )

# Customize the path variable
pathdirs=(
  /usr/local/opt/coreutils/libexec/gnubin
  /sbin
  /usr/sbin
  /usr/local/sbin
  /bin
  /usr/bin
  /usr/local/bin
  ~/.gem/bin
  ~/.composer/vendor/bin
  ~/.npm-packages/bin
  $DOTFILES_PATH/bin
  ~/bin
)

for dir in $pathdirs; do
  [ -d $dir ] && path=($dir $path)
done

mandirs=(
  /usr/share/man
  /usr/local/share/man
)

for dir in $mandirs; do
  [ -d $dir ] && manpath=($manpath $dir)
done

typeset -gU path mandirs

# Load custom functions
for file in $DOTFILES_PATH/functions/*; do
  autoload -Uz ${file##*/}
done

# Load zsh plugins
plugins=(
  zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
  zsh-bd/bd.zsh
)

for file in $plugins; do
  [ -f $ZSH_PLUGIN_PATH/$file ] && source $ZSH_PLUGIN_PATH/$file
done

# Load common shell aliases
source $DOTFILES_PATH/config/aliases

# Load zsh options
setopt AUTO_CD
setopt EXTENDED_GLOB

for file in $DOTFILES_PATH/config/zsh/*; do
  [ -f $file ] && source $file
done

# Load user configuration
[ -f ~/.zshrc.local ] && source ~/.zshrc.local
